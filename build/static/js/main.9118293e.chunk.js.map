{"version":3,"sources":["components/Search.tsx","components/MoreSite/Site.tsx","components/MoreSite/AddSite.tsx","components/MoreSite/MoreSite.tsx","App.tsx","index.tsx"],"names":["SearchBar","styled","form","MySearchOutlined","SearchOutlined","Search","localStorage","window","getItem","setItem","JSON","stringify","action","name","enginData","useState","value","setValue","parse","engin","setEngin","useEffect","enginTemp","method","type","onChange","e","target","autoComplete","autoFocus","spellCheck","placeholder","replace","onClick","result","split","slice","join","trim","preventDefault","console","log","SiteWrapper","a","LogoWrapper","div","Title","Menu","span","MyCloseOutlined","CloseOutlined","MoreSite","props","visible","setVisible","href","url","onMouseEnter","onMouseLeave","filter","item","responseRemove","src","alt","AddSite","PlusOutlined","MoreSiteWrapper","main","setSiteList","map","Site","Math","random","prompt","alert","currentSiteList","push","Layout","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9118293e.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { SearchOutlined } from '@ant-design/icons'\n\nconst SearchBar = styled.form`\n  position: relative;\n  >input {\n    width: 561px;\n    height: 44px;\n    padding: 0px 50px;\n    border: none;\n    border-radius: 22px;\n    font-size: 17px;\n    outline: none;\n    box-shadow: 0 1px 6px 0 rgb(32 33 36 / 28%);\n  }\n  >button {\n    display: none;\n  }\n`;\n\nconst MySearchOutlined = styled(SearchOutlined)`\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  left: 15px;\n  font-size: 19px;\n  color: gray;\n`;\n\nconst Search: React.FC = () => {\n\n  const localStorage = window.localStorage;\n  if(localStorage.getItem('enginData') === null){\n    // 确保localStorage存在\n    localStorage.setItem('enginData', JSON.stringify({\n      action: '',\n      name: ''\n    }));\n  }\n  const enginData = localStorage.getItem('enginData');\n  const [value, setValue] = useState('');\n  const [engin, setEngin] = useState(JSON.parse(enginData as string));\n\n  useEffect(() => {\n    if ((!localStorage.getItem('enginData')) || engin.action === '') {\n      const enginTemp = {\n        action: 'https://www.google.com/search',\n        name: 'q'\n      };\n      setEngin(enginTemp);\n      localStorage.setItem('enginData', JSON.stringify(enginTemp));\n      \n    } else {\n      localStorage.setItem('enginData', JSON.stringify(engin));\n    }\n  }, [engin]);\n\n  // 切换搜索引擎\n  // todo 这里以后应该要支持自定义搜索引擎\n  const handleClick = (e:React.MouseEvent) => {\n    const result = value.split(' ');\n    if (result[0] === ':gg' || result[0] === '：gg') {\n      setEngin({\n        action: 'https://www.google.com/search',\n        name: 'q'\n      });\n      setValue(result.slice(1).join(' '));\n      if(result.slice(1).join(' ').trim() === ''){\n        e.preventDefault();\n      }\n    } else if (result[0] === ':bd' || result[0] === '：bd') {\n      setEngin({\n        action: 'https://www.baidu.com/s',\n        name: 'wd'\n      });\n      setValue(result.slice(1).join(' '));\n      if(result.slice(1).join(' ').trim() === ''){\n        e.preventDefault();\n      }\n    } else if(value.trim() === ''){\n      e.preventDefault();\n    }\n    console.log(value.trim());\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setValue(e.target.value);\n  };\n\n  // 处理引擎名字\n  const handleName = (name:string) => {\n    return name.replace('https://', '')\n        .replace('http://', '')\n        .replace('www.', '')\n        .replace('.com', '')\n        .replace(/\\/.*/, '');\n  };\n\n  return (\n    <>\n      <SearchBar action={engin.action} method=\"GET\" name=\"searchForm\">\n        <MySearchOutlined />\n        <input \n        type=\"text\" \n        name={engin.name} \n        value={value} \n        onChange={handleChange} \n        autoComplete=\"off\"\n        autoFocus={true}\n        spellCheck=\"false\"\n        placeholder={`在 ${handleName(engin.action)} 上搜索，或者使用 :xx 切换引擎`}\n        />\n\n        <button type=\"submit\" onClick={handleClick}>搜索</button>\n      </SearchBar>\n    </>\n  )\n};\n\nexport default Search;","import { CloseOutlined, MoreOutlined } from '@ant-design/icons';\nimport React, { useState } from 'react';\nimport styled from 'styled-components';\n\nconst SiteWrapper = styled.a`\n  position: relative;\n  display: flex;\n  flex-flow: column;\n  align-items:center;\n  width: 112px;\n  height: 112px;\n  margin-bottom: 10px;\n  padding: 10px 0 3px 0;\n  color: black;\n  border-radius: 7px;\n  &:hover{\n    background-color: #e8e8e9;\n    color: black;\n  };\n  &:focus{\n    /* 用box-shadow模拟outline 绝了 */\n    box-shadow: 0 0 0 2px pink;\n  }\n`;\n\nconst LogoWrapper = styled.div`\n  position: relative;\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  background-color: #f1f3f4;\n  overflow: hidden;\n\n  &>img{\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 24px;\n    height: 24px;\n  }\n`;\n\nconst Title = styled.div`\n  margin-top: 20px;\n`;\n\nconst Menu = styled.span`\n  position: absolute;\n  top: 3px;\n  right: 10px;\n  z-index: 2;\n  &:hover{\n    cursor: default;\n  };\n`;\n\nconst MyCloseOutlined = styled(CloseOutlined)`\n  font-size: 12px;\n`;\n\ninterface Props  {\n  name: string;\n  url: string;\n  responseRemove: Function;\n}\n\nconst MoreSite:React.FC<Props> = (props) => {\n\n  const [visible, setVisible] = useState(false);\n\n  const handleMouseEnter = () => {\n    setVisible(true);\n  };\n  const handleMouseLeave = () => {\n    setVisible(false);\n  };\n\n  // todo 暂时还不弄菜单, 未来会添加编辑功能, 目前只有删除\n  const handleClick = (name:string) => {\n    return (e:React.MouseEvent) => {\n      e.preventDefault();\n      // 处理数据\n      interface SiteList {\n        name: string;\n        url: string;\n      };\n      const result = (JSON.parse(localStorage.getItem('siteList') as string) as Array<SiteList>).filter((item)=> {\n        return item.name !== name;\n      });\n      localStorage.setItem('siteList', JSON.stringify(result));\n      props.responseRemove();\n    }\n  };\n\n  return (\n    <SiteWrapper href={props.url} onMouseEnter={handleMouseEnter} onMouseLeave={handleMouseLeave} target=\"_blank\">\n      {\n        visible ? \n        <Menu onClick={handleClick(props.name)}>\n          <MyCloseOutlined/>\n        </Menu>:\n        <></>\n      }\n      <LogoWrapper>\n        {/* 这里可能还需要做一些检查, 防止没有找到favicon */}\n        <img src={`${props.url}/favicon.ico`} alt=\"\"/>\n      </LogoWrapper>\n      <Title>{props.name}</Title>\n    </SiteWrapper>\n  );\n}\n\nexport default MoreSite;\n","import { PlusOutlined } from '@ant-design/icons';\nimport React from 'react';\nimport styled from 'styled-components';\n\nconst SiteWrapper = styled.a`\n  display: flex;\n  flex-flow: column;\n  align-items:center;\n  width: 112px;\n  height: 112px;\n  margin-bottom: 10px;\n  padding: 10px 0 3px 0;\n  color: black;\n  border-radius: 7px;\n  &:hover{\n    background-color: #e8e8e9;\n    color: black;\n  };\n`;\n\nconst LogoWrapper = styled.div`\n  position: relative;\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  background-color: #f1f3f4;\n  overflow: hidden;\n\n  &>span{\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    font-size: 20px;\n  }\n`;\n\nconst Title = styled.div`\n  margin-top: 20px;\n`;\n\n\ninterface Props {\n  onClick (): void,\n};\n\nconst AddSite:React.FC<Props> = (props) => {\n  return (\n    <SiteWrapper {...props}>\n      <LogoWrapper>\n        <PlusOutlined />\n      </LogoWrapper>\n      <Title>添加</Title>\n    </SiteWrapper>\n  );\n}\n\nexport default AddSite;\n","import React, { useState } from 'react';\nimport styled from 'styled-components'\nimport Site from './Site'\nimport AddSite from './AddSite'\n\nconst MoreSiteWrapper = styled.main`\n  display: flex;\n  flex-wrap: wrap;\n  width: 573px;\n  margin-top: 40px;\n`\n\nconst MoreSite:React.FC = () => {\n\n  // 持久化处理\n  const localStorage = window.localStorage;\n  if(!localStorage.getItem('siteList')){\n    localStorage.setItem('siteList', JSON.stringify(\n      [\n        {\n          name: '',\n          url: ''\n        }\n      ]\n    ));\n  }\n  const [siteList, setSiteList] = useState(localStorage.getItem('siteList'));\n\n  // 添加元素 感觉有点丑? 未来可能会重构把它放进组件里面, 外面就留一个简单的函数调用就行\n  const handleClick = () => {\n    const name = window.prompt('name');\n    const url =  window.prompt('url');\n    if((name?.trim() !== '' || url?.trim() !== '') && (name !== null || url !== null)){\n      // 修改本地数据\n      const currentSiteList = JSON.parse(localStorage.getItem('siteList') as string);\n      currentSiteList.push({name, url});\n      localStorage.setItem('siteList', JSON.stringify(currentSiteList));\n      // 修改组件状态, 更新页面\n      setSiteList(localStorage.getItem('siteList'));\n    } else {\n      alert('输入错误, 请重试');\n    }\n  };\n\n  // 响应删除元素\n  const responseRemove = () => {\n    setSiteList(localStorage.getItem('siteList'));\n  }\n\n  interface SiteList {\n    name: string;\n    url: string;\n  };\n\n  return (\n    <MoreSiteWrapper>\n      {\n        (JSON.parse(localStorage.getItem('siteList') as string) as Array<SiteList>).map((item)=> {\n          if(item.url !== ''){\n            return <Site name={item.name} url={item.url} key={Math.random()*10} responseRemove={responseRemove}/>\n          }\n        })\n      }\n\n      <AddSite onClick={handleClick} />\n    </MoreSiteWrapper>\n  );\n}\n\nexport default MoreSite;\n","import React from 'react';\nimport styled from 'styled-components';\nimport Search from './components/Search';\nimport MoreSite from './components/MoreSite/MoreSite';\n\nconst Layout = styled.div`\n  display: flex;\n  flex-flow: column;\n  align-items: center;\n  padding-top: 280px;\n  /* border: 1px solid red; */\n`;\n\nconst App:React.FC = () => {\n  return (\n    <Layout>\n      <Search/>\n      <MoreSite/>\n    </Layout>\n  )\n};\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './reset.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}